<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>virtual host &#8211; DesireLabs</title>
	<atom:link href="/tag/virtual-host/feed/" rel="self" type="application/rss+xml" />
	<link>/</link>
	<description>D√©veloppement web, marketing digital, et r√©f√©rencement</description>
	<lastBuildDate>Tue, 06 Jun 2017 17:34:36 +0000</lastBuildDate>
	<language>fr-FR</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>https://wordpress.org/?v=4.9.4</generator>
<site xmlns="com-wordpress:feed-additions:1">67143140</site>	<item>
		<title>Mettre son dossier www dans home pour chaque utilisateur linux</title>
		<link>/mettre-son-dossier-www-dans-home-pour-chaque-utilisateur-linux/</link>
		<comments>/mettre-son-dossier-www-dans-home-pour-chaque-utilisateur-linux/#respond</comments>
		<pubDate>Sat, 24 May 2014 08:36:55 +0000</pubDate>
		<dc:creator><![CDATA[Franck]]></dc:creator>
				<category><![CDATA[Apache]]></category>
		<category><![CDATA[Linux]]></category>
		<category><![CDATA[apache]]></category>
		<category><![CDATA[userdir]]></category>
		<category><![CDATA[vhost]]></category>
		<category><![CDATA[virtual host]]></category>

		<guid isPermaLink="false">/?p=170</guid>
		<description><![CDATA[<p>Longtemps je me suis cass√© la t√™te et les dents √† coup de chmod et chown pour r√©soudre la question de comment mettre son dossier www dans home pour chaque utilisateur linux. Aujourd&#8217;hui, je vous pr√©sente un moyen simple d&#8217;y parvenir avec le module Apache userdir.Avant de connaitre l&#8217;astuce que je vais vous pr√©senter, je &#8230; <a href="/mettre-son-dossier-www-dans-home-pour-chaque-utilisateur-linux/" class="more-link">Continuer la lecture de <span class="screen-reader-text">Mettre son dossier www dans home pour chaque utilisateur linux</span></a></p>
<p>L‚Äôarticle <a rel="nofollow" href="/mettre-son-dossier-www-dans-home-pour-chaque-utilisateur-linux/">Mettre son dossier www dans home pour chaque utilisateur linux</a> est apparu en premier sur <a rel="nofollow" href="/">DesireLabs</a>.</p>
]]></description>
				<content:encoded><![CDATA[<p>Longtemps je me suis cass√© la t√™te et les dents √† coup de chmod et chown pour r√©soudre la question de comment mettre son dossier www dans home pour chaque utilisateur linux. Aujourd&rsquo;hui, je vous pr√©sente un moyen simple d&rsquo;y parvenir avec le module Apache userdir.<span id="more-170"></span>Avant de connaitre l&rsquo;astuce que je vais vous pr√©senter, je me torturais, comme beaucoup d&rsquo;auters j&rsquo;imagine, √† configurer apache d&rsquo;une part, et des permissions tarabiscot√©es √† coup de chmod d&rsquo;autre part. C&rsquo;√©tait sans compter sur un petit module apache fort pratique, √† savoir userdir.</p>
<h2>Pourquoi mettre son dossier www dans le r√©pertoire /home de l&rsquo;utilisateur ?</h2>
<p>D&rsquo;abord parce que c&rsquo;est plus propre : chaque utilisateur √† son login et son mot de passe, et donc son r√©pertoire. Ainsi on s√©pare bien toutes nos entit√©s et on s&rsquo;y retrouve plus facilement.</p>
<p>Ensuite, parce que c&rsquo;est plus s√©curis√© : Comme dit juste avant, on ferme tout et chaque utilisateur acc√®de √† son espace et pas celui des autres, gr√¢ce √† son login/mot de passe. De plus, si comme moi vous avez install√© votre /home sur une partition distincte de la partition syst√®me, vous ne risquez pas de perdre vos donn√©es web si jamais quelque chose tournait mal et que vous vouliez r√©cup√©rer votre boulot.</p>
<h2>Ce qu&rsquo;on va faire</h2>
<p>Cr√©ation d&rsquo;un espace individuel pour chaque site<br />
Activation du module Apache UserDir<br />
Configuration d&rsquo;un virtual host associ√©</p>
<h2>Avant de commencer</h2>
<p>Toutes les manipulations pr√©sent√©es ici sont r√©alis√©es sur un syst√®me Debian 7 Wheezy, mais √ßa fonctionne √©galement sur tout syst√®me de base Debian avec Apache2 d&rsquo;install√©, comme Ubuntu. Il va de soit que tout se passe en ligne de commande et qu&rsquo;un minimum de connaissance du shell est n√©cessaire.</p>
<h2>On y va <img src="https://s.w.org/images/core/emoji/2.4/72x72/1f642.png" alt="üôÇ" class="wp-smiley" style="height: 1em; max-height: 1em;" /></h2>
<h3>Cr√©ation d&rsquo;un utilisateur</h3>
<p></p><pre class="crayon-plain-tag">sudo adduser wplabs</pre><p></p>
<h3>Activation du module Apache userdir</h3>
<p>On active le module (1√®re commande), puis on modifie sa configuration (2√®me commande)</p><pre class="crayon-plain-tag">sudo a2enmod userdir
sudo nano /etc/apache2/mods-available/userdir.conf</pre><p>Dans le fichier de config, on a juste un truc √† modifier : public_html qu&rsquo;on va transformer en www aux lignes 2 et 5. On pourrait tr√®s bien garder le nom ¬´¬†public_html¬†¬ª, mais on va garder la coh√©rence du dossier /var/www.</p><pre class="crayon-plain-tag">&lt;IfModule mod_userdir.c&gt;
        UserDir public_html 
        UserDir disabled root

        &lt;Directory /home/*/public_html&gt;
                AllowOverride FileInfo AuthConfig Limit Indexes
                Options MultiViews Indexes SymLinksIfOwnerMatch IncludesNoExec
                &lt;Limit GET POST OPTIONS&gt;
                        Order allow,deny
                        Allow from all
                &lt;/Limit&gt;
                &lt;LimitExcept GET POST OPTIONS&gt;
                        Order deny,allow
                        Deny from all
                &lt;/LimitExcept&gt;
        &lt;/Directory&gt;
&lt;/IfModule&gt;</pre><p>Voil√† ce que √ßa donne :<br />
Ce qu&rsquo;on a fait ici c&rsquo;est simplement dire que les fichiers visibles et accessibles (nos sites) se trouvent toujours dans le dossier /home/*/www (l‚Äôast√©risque sert √† dire n&rsquo;importe quel utilisateur). Pensez √† sauvegarder.</p><pre class="crayon-plain-tag">&lt;IfModule mod_userdir.c&gt;
        UserDir www 
        UserDir disabled root

        &lt;Directory /home/*/www&gt;
                AllowOverride FileInfo AuthConfig Limit Indexes
                Options MultiViews Indexes SymLinksIfOwnerMatch IncludesNoExec
                &lt;Limit GET POST OPTIONS&gt;
                        Order allow,deny
                        Allow from all
                &lt;/Limit&gt;
                &lt;LimitExcept GET POST OPTIONS&gt;
                        Order deny,allow
                        Deny from all
                &lt;/LimitExcept&gt;
        &lt;/Directory&gt;
&lt;/IfModule&gt;</pre><p></p>
<h3>Cr√©ation du virtualhost</h3>
<p>On se rend dans le dossier des vhost, et on commence par jeter un oeil √† celui par d√©faut.</p><pre class="crayon-plain-tag">cd /etc/apache2/sites-available/
sudo nano default</pre><p>√áa c&rsquo;est mon vhost par d√©faut. Le votre est peut etre diff√©rent, mais ce qui importe c&rsquo;est qu&rsquo;il indique DocumentRoot /home/*/www<br />
Vous remarquez ? Comme dans mon userdir.conf <img src="https://s.w.org/images/core/emoji/2.4/72x72/1f642.png" alt="üôÇ" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p><pre class="crayon-plain-tag">&lt;VirtualHost *:80&gt;
        ServerAdmin neovea@gmail.com
        DocumentRoot /home/*/www
        &lt;Directory /&gt;
                Options FollowSymLinks
                AllowOverride All
        &lt;/Directory&gt;
        &lt;Directory /home/*/www/&gt;
                Options Indexes FollowSymLinks MultiViews
                AllowOverride all
                Order allow,deny
                allow from all
        &lt;/Directory&gt;
&lt;/VirtualHost&gt;</pre><p>Vu qu&rsquo;il est bon, on le copie colle en le renommant du nom de notre site, et on l&rsquo;√©dite.</p><pre class="crayon-plain-tag">sudo cp default wplabs
sudo nano wplabs</pre><p>Renseignez bien le chemin tel qu&rsquo;il existe cette fois ci, cf lignes 5 et 10, et faites en sorte d&rsquo;avoir un alias/name valide, sans quoi √ßa ne fonctionnera pas.</p><pre class="crayon-plain-tag">&lt;VirtualHost *:80&gt;
        ServerAdmin neovea@gmail.com
        ServerAlias wplabs.desirelabs.fr
        ServerName wplabs.desirelabs.fr
        DocumentRoot /home/wplabs/www
        &lt;Directory /&gt;
                Options FollowSymLinks
                AllowOverride All
        &lt;/Directory&gt;
        &lt;Directory /home/wplabs/www/&gt;
                Options Indexes FollowSymLinks MultiViews
                AllowOverride all
                Order allow,deny
                allow from all
        &lt;/Directory&gt;
&lt;/VirtualHost&gt;</pre><p></p>
<h3>Activation du site et reload d&rsquo;apache</h3>
<p>Le reload est important, il permet de prendre en compte le nouveau site activ√©, mais aussi le module qui a √©t√© activ√©, userdir.</p><pre class="crayon-plain-tag">sudo a2ensite wplabs
sudo service apache2 reload</pre><p></p>
<h3>Cr√©ation du site et tests</h3>
<p>Rien de m√©chant, on se connecte avec le user qu&rsquo;on a cr√©√© pr√©c√©demment, et on lui fait cr√©er un dossier www dans son propre espace.</p><pre class="crayon-plain-tag">su wplabs
cd
mkdir www</pre><p>Alors oui c&rsquo;est vrai on pourrait mettre tous les fichiers du site √† la racine du user, mais je pr√©f√®re proc√©der ainsi et me garder la libert√© de pouvoir mettre des choses √† c√¥t√© du r√©pertoire de mon site si je le souhaite, comme mes backups de base de donn√©es par exemple, ou simplement une nouvelle version du site en cours de d√©veloppement.</p>
<p>Testez votre site en cr√©ant un b√™te index.html dans www et profitez <img src="https://s.w.org/images/core/emoji/2.4/72x72/1f642.png" alt="üôÇ" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<p>Fini la prise de t√™te avec chmod !</p>
<p>L‚Äôarticle <a rel="nofollow" href="/mettre-son-dossier-www-dans-home-pour-chaque-utilisateur-linux/">Mettre son dossier www dans home pour chaque utilisateur linux</a> est apparu en premier sur <a rel="nofollow" href="/">DesireLabs</a>.</p>
]]></content:encoded>
			<wfw:commentRss>/mettre-son-dossier-www-dans-home-pour-chaque-utilisateur-linux/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">170</post-id>	</item>
	</channel>
</rss>
